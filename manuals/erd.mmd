erDiagram
    USERS ||--o{ TASKS : "creates/owns"
    USERS ||--o{ USER_BADGES : "earns"
    TASKS ||--o{ SUB_ROUTINES : "contains"
    TASKS ||--o{ ATTACHMENTS : "uplinks"

    USERS {
        int id PK
        string username
        string password_hash
        string role "admin|user"
        int exp "Gamification"
        int level
        string tfa_secret "2FA TOTP"
    }

    TASKS {
        int id PK
        int user_id FK
        string title
        text description
        string priority "Low|Medium|High"
        date due_date
        boolean completed
        string recurrence_rule "JSON pattern"
    }

    SUB_ROUTINES {
        int id PK
        int task_id FK
        string content
        boolean is_completed
        int sort_order "Drag and drop positioning"
    }

    ATTACHMENTS {
        int id PK
        int task_id FK
        string filename
        string file_path
    }
